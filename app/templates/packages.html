{% extends "base.html" %}

{% block title %}Packages & Pricing - Momentum Clips{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative hero-gradient text-white pt-28 sm:pt-32 pb-12 sm:pb-16 lg:pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 heading">CHOOSE YOUR PACKAGE</h1>
        <p class="text-base sm:text-lg lg:text-2xl text-gray-300 font-medium px-4">Professional video production for every skill level</p>
    </div>
</section>

<!-- Compare Packages -->
<section class="py-12 sm:py-16 bg-gray-50">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
            <h2 class="text-3xl sm:text-4xl font-bold text-[#0F172A] mb-4 heading">COMPARE PACKAGES</h2>
            <p class="text-lg text-gray-600">Find the perfect package for your session</p>
        </div>
        
        {% if packages %}
        <!-- Package Cards Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            {% for package in packages %}
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 {% if package.name == 'Pro Session' %}ring-2 ring-[#8B5CF6]{% endif %}">
                <!-- Header -->
                <div class="{% if package.name == 'Pro Session' %}bg-gradient-to-r from-[#8B5CF6] to-[#7C3AED]{% elif package.name == 'Expert Session' %}bg-gradient-to-r from-[#F59E0B] to-[#D97706]{% else %}bg-gradient-to-r from-[#00D4FF] to-[#00B8E6]{% endif %} text-white p-6 text-center">
                    {% if package.name == 'Pro Session' %}
                    <span class="inline-block bg-white/20 text-white text-xs font-bold px-3 py-1 rounded-full mb-3">MOST POPULAR</span>
                    {% endif %}
                    <h3 class="text-2xl font-bold mb-2">{{ package.name }}</h3>
                    <div class="text-4xl font-bold">${{ "%.0f"|format(package.price) }}</div>
                    <p class="text-white/80 text-sm mt-1">{{ package.duration }} hours</p>
                </div>
                
                <!-- Features -->
                <div class="p-6">
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-center text-gray-700">
                            <i class="fas fa-video text-[#00D4FF] w-5 mr-3"></i>
                            {{ package.video_count }} edited video(s)
                        </li>
                        <li class="flex items-center text-gray-700">
                            <i class="fas fa-users text-[#00D4FF] w-5 mr-3"></i>
                            Up to {{ package.max_riders }} rider(s)
                        </li>
                        <li class="flex items-center text-gray-700">
                            {% if package.includes_drone %}
                            <i class="fas fa-check-circle text-green-500 w-5 mr-3"></i>
                            Drone footage included
                            {% else %}
                            <i class="fas fa-times-circle text-gray-400 w-5 mr-3"></i>
                            <span class="text-gray-400">No drone footage</span>
                            {% endif %}
                        </li>
                    </ul>
                    
                    <!-- View Details Button -->
                    <a href="{{ url_for('main.package_detail', package_id=package.id) }}" 
                       class="block w-full text-center border-2 {% if package.name == 'Pro Session' %}border-[#8B5CF6] text-[#8B5CF6] hover:bg-[#8B5CF6]{% elif package.name == 'Expert Session' %}border-[#F59E0B] text-[#F59E0B] hover:bg-[#F59E0B]{% else %}border-[#00D4FF] text-[#00D4FF] hover:bg-[#00D4FF]{% endif %} hover:text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300">
                        View Full Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <p class="text-gray-600 text-xl">No packages available at this time.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Calendly Booking Section -->
<section class="py-16 bg-white" id="book-session">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-8">
            <h2 class="text-3xl sm:text-4xl font-bold text-[#0F172A] mb-4 heading">BOOK YOUR SESSION</h2>
            <p class="text-lg sm:text-xl text-gray-600 font-medium">Choose your package and select a time</p>
        </div>
        
        <!-- Package Selection Tabs -->
        <div class="flex flex-wrap justify-center gap-3 mb-8">
            <button onclick="selectPackage('basic')" id="tab-basic"
                    class="package-tab active px-6 py-3 rounded-xl font-bold transition-all duration-300 bg-[#00D4FF] text-white shadow-lg">
                <i class="fas fa-snowflake mr-2"></i>Basic Session
                <span class="block text-xs font-normal opacity-80">2 hrs</span>
            </button>
            <button onclick="selectPackage('pro')" id="tab-pro"
                    class="package-tab px-6 py-3 rounded-xl font-bold transition-all duration-300 bg-gray-200 text-gray-700 hover:bg-gray-300">
                <i class="fas fa-fire mr-2"></i>Pro Session
                <span class="block text-xs font-normal opacity-80">2.5 hrs</span>
            </button>
            <button onclick="selectPackage('expert')" id="tab-expert"
                    class="package-tab px-6 py-3 rounded-xl font-bold transition-all duration-300 bg-gray-200 text-gray-700 hover:bg-gray-300">
                <i class="fas fa-crown mr-2"></i>Expert Session
                <span class="block text-xs font-normal opacity-80">3 hrs</span>
            </button>
        </div>
        
        <!-- Calendly Widgets Container -->
        <div class="relative">
            <!-- Basic Session Widget -->
            <div id="calendly-basic" class="calendly-container">
                <div class="calendly-inline-widget rounded-lg overflow-hidden shadow-xl border-4 border-[#00D4FF]/20" 
                     data-url="https://calendly.com/mail-kevinjh/2hrs?hide_gdpr_banner=1&background_color=0F172A&primary_color=00D4FF" 
                     style="min-width:320px;height:700px;">
                </div>
            </div>
            
            <!-- Pro Session Widget -->
            <div id="calendly-pro" class="calendly-container hidden">
                <div class="calendly-inline-widget rounded-lg overflow-hidden shadow-xl border-4 border-[#8B5CF6]/20" 
                     data-url="https://calendly.com/mail-kevinjh/new-meeting?hide_gdpr_banner=1&background_color=0F172A&primary_color=8B5CF6" 
                     style="min-width:320px;height:700px;">
                </div>
            </div>
            
            <!-- Expert Session Widget -->
            <div id="calendly-expert" class="calendly-container hidden">
                <div class="calendly-inline-widget rounded-lg overflow-hidden shadow-xl border-4 border-[#F59E0B]/20" 
                     data-url="https://calendly.com/mail-kevinjh/new-meeting-1?hide_gdpr_banner=1&background_color=0F172A&primary_color=F59E0B" 
                     style="min-width:320px;height:700px;">
                </div>
            </div>
        </div>
        <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        
        <div class="mt-8 text-center">
            <p class="text-sm text-gray-600">
                <i class="fas fa-info-circle text-[#00D4FF] mr-2"></i>
                After booking your session, you'll receive payment instructions via email
            </p>
        </div>
    </div>
</section>

<script>
function selectPackage(pkg) {
    // Hide all calendly containers
    document.querySelectorAll('.calendly-container').forEach(el => el.classList.add('hidden'));
    
    // Reset all tabs
    document.querySelectorAll('.package-tab').forEach(tab => {
        tab.classList.remove('bg-[#00D4FF]', 'bg-[#8B5CF6]', 'bg-[#F59E0B]', 'text-white', 'shadow-lg');
        tab.classList.add('bg-gray-200', 'text-gray-700');
    });
    
    // Show selected calendly and style tab
    const activeTab = document.getElementById('tab-' + pkg);
    document.getElementById('calendly-' + pkg).classList.remove('hidden');
    activeTab.classList.remove('bg-gray-200', 'text-gray-700');
    activeTab.classList.add('text-white', 'shadow-lg');
    
    if (pkg === 'basic') activeTab.classList.add('bg-[#00D4FF]');
    else if (pkg === 'pro') activeTab.classList.add('bg-[#8B5CF6]');
    else if (pkg === 'expert') activeTab.classList.add('bg-[#F59E0B]');
}

// Auto-select package if coming from homepage
document.addEventListener('DOMContentLoaded', function() {
    const selectedPackage = localStorage.getItem('selectedPackage');
    if (selectedPackage) {
        selectPackage(selectedPackage);
        localStorage.removeItem('selectedPackage');
    }
});
</script>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/gallery.js') }}"></script>
{% endblock %}

